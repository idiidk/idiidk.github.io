var L=Object.defineProperty;var X=(n,i,r)=>i in n?L(n,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[i]=r;var t=(n,i,r)=>X(n,typeof i!="symbol"?i+"":i,r);import{u as P,_ as N}from"./_plugin-vue_export-helper-B7dIpNB9.js";import{i as v,w as Y,a as k}from"./window.util-CWATEhfb.js";import{d as b,r as M,y as w,z as D,h as Z,c as F,o as C,f as R,l as G,e as K}from"./index-BsoPHuqO.js";const V={class:"wrapper"},$={class:"orbs"},O=.01,q=.02,H=.01,U=.005,W=65,j=45,J=50,Q=35,tt=3,st=b({__name:"OrbBackground",props:{scattered:{type:Boolean}},setup(n){const i=P(),r=M(!0),x=M(),u=w(()=>v.value?H:U),p=M(!1),I=n,T=w(()=>I.scattered),B=(a,s)=>Math.random()*(s-a)+a,m=(a,s,e)=>a+(s-a)*e;class z{constructor(s,e,l,o,d,h,g){t(this,"ctx");t(this,"color");t(this,"x");t(this,"y");t(this,"targetX");t(this,"targetY");t(this,"originalX");t(this,"originalY");t(this,"radius");t(this,"targetRadius");t(this,"finalRadius");t(this,"easing");t(this,"sizeEasing");t(this,"settled");t(this,"settlementProgress");t(this,"isMobile");t(this,"isSettledRef");t(this,"noShadow");this.ctx=s,this.color=e,this.sizeEasing=l,this.settled=!1,this.settlementProgress=0,this.isMobile=d,this.isSettledRef=h,this.noShadow=g,this.x=B(0,this.ctx.canvas.width),this.y=B(0,this.ctx.canvas.height),this.originalX=this.x,this.originalY=this.y,this.targetX=this.isMobile.value?this.ctx.canvas.width/2:0,this.targetY=0;const _=Math.max(this.ctx.canvas.width,this.ctx.canvas.height);this.radius=_,this.finalRadius=this.ctx.canvas.height*o/100,this.targetRadius=this.finalRadius,this.easing=O}update(s){if(this.easing=this.isSettledRef.value?O:q,this.isSettledRef.value)this.targetX=this.isMobile.value?this.ctx.canvas.width/2:0,this.targetY=0,this.targetRadius=this.finalRadius;else{this.targetX=this.originalX,this.targetY=this.originalY;const h=Math.max(this.ctx.canvas.width,this.ctx.canvas.height);this.targetRadius=h}this.x=m(this.x,this.targetX,this.easing*s),this.y=m(this.y,this.targetY,this.easing*s),!this.settled||!this.isSettledRef.value?this.radius=m(this.radius,this.targetRadius,this.sizeEasing*s):this.radius=this.targetRadius;const e=1-Math.min(Math.abs(this.x-this.targetX)/(this.ctx.canvas.width/2),1),l=1-Math.min(Math.abs(this.radius-this.targetRadius)/(this.radius/2),1);this.settlementProgress=(e+l)/2;const o=Math.abs(this.x-this.targetX)<1&&Math.abs(this.y-this.targetY)<1,d=Math.abs(this.radius-this.targetRadius)<1;this.settled=o&&d,this.settled&&(this.settlementProgress=1,this.x=this.targetX,this.y=this.targetY,this.radius=this.targetRadius)}render(s){this.update(s),this.ctx.beginPath();const e=this.ctx.createRadialGradient(this.x,this.y,this.radius*.2,this.x,this.y,this.radius);e.addColorStop(0,this.color),e.addColorStop(.5,`${this.color}66`),e.addColorStop(1,`${this.color}00`),this.ctx.fillStyle=e,this.ctx.arc(this.x,this.y,this.radius,0,Math.PI*2,!1),this.noShadow?(this.ctx.shadowBlur=0,this.ctx.shadowColor="transparent"):(this.ctx.shadowBlur=20,this.ctx.shadowColor=this.color),this.ctx.fill()}}return D(()=>{r.value=!1}),Z(()=>{const a=x.value;if(!a)throw new Error("No ref to background canvas");const s=a.getContext("2d");s.globalCompositeOperation="lighter";const e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),l=e?[...i.baseColors.slice(0,10)].sort(()=>Math.random()-.5):[...i.baseColors].sort(()=>Math.random()-.5);let o=[],d;const h=()=>{clearTimeout(d),s.canvas.width=Y.value,s.canvas.height=k.value,d=setTimeout(()=>{if(o.length>0)return;o=[],p.value=!1;const E=l.length,f=v.value?W:J,S=v.value?j:Q;l.forEach((c,A)=>{const y=f-(f-S)*A/(E-1);o.push(new z(s,c,u.value,y,v,T,e))})},100)};window.addEventListener("resize",h),window.addEventListener("orientationchange",()=>setTimeout(h,200)),h();let g=0;const _=E=>{if(!r.value)return;const f=E-g,S=Math.min(f/(1e3/60),tt);g=E,s.clearRect(0,0,a.width,a.height),p.value||(p.value=o.every(c=>c.settled)),o.forEach(c=>{c.settled||(c.sizeEasing=u.value),c.render(S)}),requestAnimationFrame(_)};requestAnimationFrame(_)}),(a,s)=>(C(),F("div",V,[R("div",$,[R("canvas",{ref_key:"backgroundCanvas",ref:x},null,512)])]))}}),et=N(st,[["__scopeId","data-v-7e6a9169"]]),rt=b({__name:"index",setup(n){const i=P();return(r,x)=>{const u=et;return C(),G(u,{scattered:!K(i).menu},null,8,["scattered"])}}});export{rt as default};
